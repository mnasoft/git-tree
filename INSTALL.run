#!/bin/bash

# –ü–æ–¥–ø–∏—Å–∏ –≤ –Ω–∞—á–∞–ª–µ –ª–æ–≥–æ–≤
echo "### üîß –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã" > INSTALL.log
echo "#!/bin/bash" > UNINSTALL.run
echo "### üßπ –°–∫—Ä–∏–ø—Ç —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤" >> UNINSTALL.run
echo "" >> UNINSTALL.run

echo "üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤..."
for i in $(find . -name "git-tree" -o -name "git-tree-*"); do
    name=$(basename "$i")
    cp -f "$i" /usr/local/bin/
    chmod +x "/usr/local/bin/$name"
    echo "üß≠ $name ‚Üí /usr/local/bin/"
    echo "/usr/local/bin/$name" >> INSTALL.log
    echo "rm -f /usr/local/bin/$name" >> UNINSTALL.run
done

echo "‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
mkdir -p /etc/git-tree/
for i in $(find . -name "git-tree.conf"); do
    name=$(basename "$i")
    cp -f "$i" /etc/git-tree/
    chmod +x "/etc/git-tree/$name"
    echo "‚öôÔ∏è $name ‚Üí /etc/git-tree/"
    echo "/etc/git-tree/$name" >> INSTALL.log
    echo "rm -f /etc/git-tree/$name" >> UNINSTALL.run
done

chmod +x UNINSTALL.run
echo "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –õ–æ–≥–∏ ‚Äî INSTALL.log, UNINSTALL.run"
