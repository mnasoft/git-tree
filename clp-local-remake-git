#!/bin/bash

# Выполняет пересоздание каталога ~/git, наполняя его чистыми
# репозиториями. Поиск репозиротиев ведется в каталогах:
# ~/quicklisp/local-projects/; ~/develop/; ~/elisp/.

. clp-config 

func_remove_git ()
{
    rm -rf $REPO_URL_PP/*.git
}

func_remake_git ()
{
    CDIR=`pwd`
    for i in `find . -name "*.git"`
    do
        cd $i/..
        NAME=`pwd`
        BNAME=`basename $NAME`
        echo $i
        echo $NAME
        echo $BNAME
        cd ..
        git clone --bare $BNAME $REPO_URL_PP/$BNAME.git
        cd $CDIR
    done
}

func_remove_git

cd ~/quicklisp/local-projects/
func_remake_git

cd ~/develop/
func_remake_git

cd ~/elisp/
func_remake_git
